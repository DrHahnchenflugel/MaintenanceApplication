<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %} Maintenance {% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
        {% block head_extra %}{% endblock %}
    </head>
    <body>
        <div class="layout">
            {% include "_partials/_sidebar.html" %}

            <div class="main">
                <header class="header">
                    <div class="top">
                        <span id="clock" class="badge badge--xs badge--mono">00:00 AM</span>
                        <span class="badge badge--xs">THO</span>
                    </div>

                    <h1>{% block page_title %}MAINTENANCE{% endblock %}</h1>

                    <div class="meta">
                        <span id="date" class="badge">
                            {% block header_right %} Monday, September 1 {% endblock %}
                        </span>
                    </div>
                </header>

                <main class="content">
                    {% block content_header %}{% endblock %}
                    {% block content %}{% endblock %}
                </main>

                <div class="footer">
                    <div>{% block footer_left %}{% endblock %}</div>
                    <div>{% block footer_center_right %}{% endblock %}</div>
                </div>
            </div>
        </div>

         <div id="imgModal" class="img-modal" onclick="closeImgModal()">
            <img id="imgModalContent" class="img-modal-content" alt="Expanded issue photo">
          </div>

        <script>
        function updateDateTime() {
            const now = new Date();

            document.getElementById("clock").textContent =
                now.toLocaleTimeString("en-US", { hour: "2-digit", minute: "2-digit" });

            document.getElementById("date").textContent =
                now.toLocaleDateString("en-US", {
                    weekday: "long",
                    month: "long",
                    day: "numeric"
                });
        }

        updateDateTime();
        setInterval(updateDateTime, 60000);
        </script>

        <script>
          function openImgModal(src) {
            const m = document.getElementById("imgModal");
            const img = document.getElementById("imgModalContent");
            img.src = src;
            m.classList.add("open");
            document.body.classList.add("no-scroll");
          }

          function closeImgModal() {
            const m = document.getElementById("imgModal");
            const img = document.getElementById("imgModalContent");
            m.classList.remove("open");
            document.body.classList.remove("no-scroll");
            img.src = "";
          }

          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeImgModal();
          });
        </script>
    </body>
</html>