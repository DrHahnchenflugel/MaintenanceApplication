{% extends "base.html" %}
{% block title %}Maintenance â€“ Asset{% endblock %}
{% block page_title %}Asset{% endblock %}

{% block page_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/asset.css') }}">
{% endblock %}

{% block content %}
<div class="asset-page">
  <section class="card asset-hero">
    <div>
      <h2 class="asset-hero__title">Asset #{{ asset.asset_tag }}</h2>
      <p class="asset-hero__subtitle">
        {{ asset.make_label or asset.make_name or '-' }} {{ asset.model_label or asset.model_name or '-' }}
      </p>
    </div>
    <span class="asset-pill">{{ asset.status_label or asset.status_code or 'Unknown' }}</span>
  </section>

  <section class="card asset-main-panel">
    <div class="asset-details">
      <h3>Asset Details</h3>

      <div class="asset-grid">
        <div class="asset-col">
          <div class="asset-row"><span>Serial</span><strong>{{ asset.serial_number or '-' }}</strong></div>
          <div class="asset-row"><span>Category</span><strong>{{ asset.category_label or asset.category_name or '-' }}</strong></div>
          <div class="asset-row">
            <span>Purchased</span>
            <strong>
              {% set t, d = asset.acquired_at | format_dt %}
              {{ d if d else '-' }}
            </strong>
          </div>
          <div class="asset-row"><span>Site</span><strong>{{ asset.site_shorthand or '-' }}</strong></div>
          <div class="asset-row"><span>Location</span><strong>{{ asset.site_fullname or '-' }}</strong></div>
        </div>

        <div class="asset-col">
          <div class="asset-row"><span>Age</span><strong>{{ asset_age }}</strong></div>
          <div class="asset-row"><span>Retired</span><strong>{{ 'Yes' if asset.retired_at else 'No' }}</strong></div>
          <div class="asset-row"><span>Status</span><strong>{{ asset.status_code or '-' }}</strong></div>
          <div class="asset-row"><span>Model</span><strong>{{ asset.model_label or asset.model_name or '-' }}</strong></div>
          <div class="asset-row"><span>Variant</span><strong>{{ asset.variant_label or asset.variant_name or '-' }}</strong></div>
        </div>
      </div>

      <a class="btn btn-secondary asset-back" href="{{ url_for('app.assets_index') }}">Back to list</a>
    </div>

    <div class="asset-history">
      <h3>Past Actions</h3>

      {% if past_actions %}
        {% for action in past_actions %}
          <div class="history-item">
            <div class="history-date">{% set t, d = action.created_at | format_dt %}{{ d }}</div>
            <div class="history-title">{{ action.status.label }}</div>
            <div class="history-body">{{ action.title }}</div>
          </div>
        {% endfor %}
      {% else %}
        <p class="history-empty">No past actions for this asset yet.</p>
      {% endif %}
    </div>
  </section>
</div>
{% endblock %}
